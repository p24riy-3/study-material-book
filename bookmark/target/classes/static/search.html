<!DOCTYPE html>
<html>
<head>
    <title>Search Study Material</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
         body {
    min-height: 100vh;
    background:
  linear-gradient(rgba(255,255,255,0.4), rgba(255,255,255,0.15)),
  url("https://images.unsplash.com/photo-1512820790803-83ca734da794");

    background-size: cover;
    background-position: center;
    background-attachment: fixed;
}
    </style>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-primary">
    <div class="container-fluid">
        <span class="navbar-brand">Search Materials</span>
        <a href="index.html" class="btn btn-light btn-sm">
    <i class="bi bi-arrow-left"></i> Back
</a>
    </div>
</nav>

<div class="container mt-4">

    <!-- FORM START -->
    <form id="searchForm">
        <div class="input-group mb-4">
            <input class="form-control" id="tag" placeholder="Enter tag" required>
            <button class="btn btn-success" type="submit">
                <i class="bi bi-search"></i> Search
            </button>
        </div>
    </form>
    <!-- FORM END -->

    <div class="row" id="results"></div>
</div>

<script>
document.getElementById("searchForm").addEventListener("submit", function(e) {
    e.preventDefault(); // ðŸš« stop page reload

    let tag = document.getElementById("tag").value;

    fetch(`/materials/search?tag=${tag}`)
        .then(res => res.json())
        .then(data => {
            let row = document.getElementById("results");
            row.innerHTML = "";

            if (data.length === 0) {
                row.innerHTML = `<p class="text-muted">No materials found</p>`;
                return;
            }

            data.forEach(m => {
                row.innerHTML += `
                <div class="col-md-4 mb-3">
                    <div class="card shadow h-100">
                        <div class="card-body">
                            <h5>${m.title}</h5>
                            <p>${m.description || ""}</p>
                            ${m.youtubeLink ? `<a href="${m.youtubeLink}" target="_blank" class="btn btn-danger btn-sm me-1">YouTube</a>` : ""}
                            ${m.pdfPath ? `<a href="${m.pdfPath}" target="_blank" class="btn btn-primary btn-sm">PDF</a>` : ""}
                        </div>
                        <div class="card-footer">
                            Tags: ${m.tags || ""}
                        </div>
                    </div>
                </div>
                `;
            });
        });
});
</script>

</body>
</html>
